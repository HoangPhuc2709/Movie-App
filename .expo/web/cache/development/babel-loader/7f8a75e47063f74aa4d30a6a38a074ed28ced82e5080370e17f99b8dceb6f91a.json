{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\nimport React, { useState, useContext } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport { API } from \"../api/api\";\nimport { AuthContext } from \"../components/context/AuthContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function LoginScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    message = _useState6[0],\n    setMessage = _useState6[1];\n  var _useContext = useContext(AuthContext),\n    login = _useContext.login;\n  var handleLogin = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (!email || !password) {\n        setMessage(\"Vui lòng nhập đầy đủ Email và Mật khẩu\");\n        return;\n      }\n      try {\n        var _res$data$user;\n        var res = yield API.post(\"/auth/login\", {\n          email: email,\n          password: password\n        });\n        if (res.data.token && (_res$data$user = res.data.user) != null && _res$data$user.email) {\n          yield login(res.data.token, res.data.user.email);\n        } else {\n          setMessage(\"Dữ liệu đăng nhập không hợp lệ từ server\");\n        }\n      } catch (err) {\n        var _err$response, _err$response$data, _err$response2, _err$response2$data;\n        setMessage(((_err$response = err.response) == null ? void 0 : (_err$response$data = _err$response.data) == null ? void 0 : _err$response$data.error) || ((_err$response2 = err.response) == null ? void 0 : (_err$response2$data = _err$response2.data) == null ? void 0 : _err$response2$data.message) || \"Lỗi đăng nhập không xác định\");\n      }\n    });\n    return function handleLogin() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsx(ImageBackground, {\n    source: require(\"../assets/images/antman.jpg\"),\n    style: styles.bg,\n    resizeMode: \"cover\",\n    children: _jsx(View, {\n      style: styles.overlay\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  bg: {\n    flex: 1,\n    justifyContent: \"center\"\n  },\n  overlay: {\n    backgroundColor: \"rgba(0,0,0,0.7)\",\n    padding: 30,\n    borderRadius: 10,\n    margin: 20\n  },\n  logo: {\n    fontSize: 36,\n    fontWeight: \"bold\",\n    color: \"red\",\n    marginBottom: 30,\n    alignSelf: \"center\"\n  },\n  input: {\n    borderBottomWidth: 1,\n    borderBottomColor: \"#fff\",\n    marginBottom: 20,\n    color: \"white\",\n    fontSize: 16,\n    paddingVertical: 8\n  },\n  loginBtn: {\n    backgroundColor: \"red\",\n    paddingVertical: 12,\n    borderRadius: 5,\n    marginBottom: 10\n  },\n  orBtn: {\n    fontStyle: \"italic\",\n    color: \"#fff\",\n    opacity: 0.3,\n    textAlign: \"center\",\n    marginBottom: 5\n  },\n  loginText: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    fontSize: 16,\n    textAlign: \"center\"\n  },\n  fbBtn: {\n    backgroundColor: \"white\",\n    paddingVertical: 12,\n    borderRadius: 5,\n    marginBottom: 10\n  },\n  fbText: {\n    color: \"black\",\n    fontWeight: \"bold\",\n    fontSize: 16,\n    textAlign: \"center\"\n  },\n  message: {\n    marginTop: 15,\n    color: \"red\",\n    textAlign: \"center\"\n  }\n});\n_NativeWindStyleSheet.create({\n  styles: {\n    \"flex\": {\n      \"display\": \"flex\"\n    },\n    \"italic\": {\n      \"fontStyle\": \"italic\"\n    }\n  }\n});","map":{"version":3,"names":["React","useState","useContext","View","Text","TextInput","TouchableOpacity","StyleSheet","ImageBackground","API","AuthContext","jsx","_jsx","LoginScreen","_ref","navigation","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","message","setMessage","_useContext","login","handleLogin","_ref2","_asyncToGenerator","_res$data$user","res","post","data","token","user","err","_err$response","_err$response$data","_err$response2","_err$response2$data","response","error","apply","arguments","source","require","style","styles","bg","resizeMode","children","overlay","create","flex","justifyContent","backgroundColor","padding","borderRadius","margin","logo","fontSize","fontWeight","color","marginBottom","alignSelf","input","borderBottomWidth","borderBottomColor","paddingVertical","loginBtn","orBtn","fontStyle","opacity","textAlign","loginText","fbBtn","fbText","marginTop","_NativeWindStyleSheet"],"sources":["D:/HK2 2025/Mobile/APP/my-app-3/my-app/screens/LoginScreen.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    TextInput,\r\n    TouchableOpacity,\r\n    StyleSheet,\r\n    ImageBackground,\r\n} from \"react-native\";\r\nimport { API } from \"../api/api\";\r\nimport { AuthContext } from \"../components/context/AuthContext\";\r\n\r\nexport default function LoginScreen({ navigation }) {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [message, setMessage] = useState(\"\");\r\n    const { login } = useContext(AuthContext);\r\n\r\n    const handleLogin = async () => {\r\n        if (!email || !password) {\r\n            setMessage(\"Vui lòng nhập đầy đủ Email và Mật khẩu\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await API.post(\"/auth/login\", { email, password });\r\n\r\n            if (res.data.token && res.data.user?.email) {\r\n                await login(res.data.token, res.data.user.email);\r\n            } else {\r\n                setMessage(\"Dữ liệu đăng nhập không hợp lệ từ server\");\r\n            }\r\n        } catch (err) {\r\n            setMessage(\r\n                err.response?.data?.error ||\r\n                    err.response?.data?.message ||\r\n                    \"Lỗi đăng nhập không xác định\"\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ImageBackground\r\n            source={require(\"../assets/images/antman.jpg\")}\r\n            style={styles.bg}\r\n            resizeMode=\"cover\"\r\n        >\r\n            <View style={styles.overlay}>\r\n                {/* ... giữ nguyên phần UI ... */}\r\n            </View>\r\n        </ImageBackground>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    bg: {\r\n        flex: 1,\r\n        justifyContent: \"center\",\r\n    },\r\n    overlay: {\r\n        backgroundColor: \"rgba(0,0,0,0.7)\",\r\n        padding: 30,\r\n        borderRadius: 10,\r\n        margin: 20,\r\n    },\r\n    logo: {\r\n        fontSize: 36,\r\n        fontWeight: \"bold\",\r\n        color: \"red\",\r\n        marginBottom: 30,\r\n        alignSelf: \"center\",\r\n    },\r\n    input: {\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: \"#fff\",\r\n        marginBottom: 20,\r\n        color: \"white\",\r\n        fontSize: 16,\r\n        paddingVertical: 8,\r\n    },\r\n    loginBtn: {\r\n        backgroundColor: \"red\",\r\n        paddingVertical: 12,\r\n        borderRadius: 5,\r\n        marginBottom: 10,\r\n    },\r\n    orBtn: {\r\n        fontStyle: \"italic\",\r\n        color: \"#fff\",\r\n        opacity: 0.3,\r\n        textAlign: \"center\",\r\n        marginBottom: 5,\r\n    },\r\n    loginText: {\r\n        color: \"white\",\r\n        fontWeight: \"bold\",\r\n        fontSize: 16,\r\n        textAlign: \"center\",\r\n    },\r\n    fbBtn: {\r\n        backgroundColor: \"white\",\r\n        paddingVertical: 12,\r\n        borderRadius: 5,\r\n        marginBottom: 10,\r\n    },\r\n    fbText: {\r\n        color: \"black\",\r\n        fontWeight: \"bold\",\r\n        fontSize: 16,\r\n        textAlign: \"center\",\r\n    },\r\n    message: {\r\n        marginTop: 15,\r\n        color: \"red\",\r\n        textAlign: \"center\",\r\n    },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}